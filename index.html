<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="icon" type="image/png" href="media/tab-icon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="media/tab-icon/favicon.svg" />
    <link rel="shortcut icon" href="media/tab-icon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="media/tab-icon/apple-touch-icon.png" />
    <link rel="manifest" href="media/tab-icon/site.webmanifest" />

    <title>Week Planner</title>
    <link rel="stylesheet" href="styles/main.css">
</head>

<body>
    <!-- GitHub-style Header -->
    <header class="gh-header">
        <div class="gh-container header-content">

            <div class="header-left">
                <img src="media/tab-icon/favicon.svg" alt="Logo" class="gh-logo">
                <h1 class="app-title" data-i18n="appTitle" style="font-family: cursive;">
                    <span class="word1">Week</span>
                    <span style="color: #fff ;" class="word2">Planner</span>
                </h1>
            </div>

            <div class="header-right">
                <!-- Streak Counter -->
                <div class="streak-counter" id="streakCounter" title="Current streak">
                    <span class="streak-x">x</span>
                    <span class="streak-number" id="streakNumber">0</span>
                </div>

                <div class="week-navigation">
                    <button class="gh-btn" id="btnPrevWeek" data-i18n="prevWeek">السابق</button>
                    <button class="gh-btn" id="btnTodayWeek" data-i18n="today">الحالي</button>
                    <button class="gh-btn" id="btnNextWeek" data-i18n="nextWeek">التالي</button>
                </div>
                <div class="header-actions">
                    <button class="gh-btn none" id="btnThemeToggle"
                        style="padding: 3px 8px; font-size: 16px;">☀️</button>
                    <button class="gh-btn none" id="btnLangToggle">EN</button>
                    <button class="gh-btn none" id="btnViewReports" data-i18n="reports">التقارير</button>
                    <button class="gh-btn none gh-btn-primary" id="btnExportImport" data-i18n="data">البيانات</button>

                    <button class="gh-btn" id="btnSettings" data-i18n="settings">
                        <svg viewBox="0 0 16 16" width="16" height="16"
                            style="vertical-align: middle; margin-right: 4px;">
                            <path fill="currentColor"
                                d="M8 0a8.2 8.2 0 0 1 .701.031C9.444.095 9.99.645 10.16 1.29l.288 1.107c.018.066.079.158.212.224.231.114.454.243.668.386.123.082.233.09.299.071l1.103-.303c.644-.176 1.392.021 1.82.63.27.385.506.792.704 1.218.315.675.111 1.422-.364 1.891l-.814.806c-.049.048-.098.147-.088.294.016.257.016.515 0 .772-.01.147.038.246.088.294l.814.806c.475.469.679 1.216.364 1.891a7.977 7.977 0 0 1-.704 1.217c-.428.61-1.176.807-1.82.63l-1.103-.303c-.066-.019-.176-.011-.299.071a4.19 4.19 0 0 1-.668.386c-.133.066-.194.158-.211.224l-.29 1.106c-.168.646-.715 1.196-1.458 1.26a8.094 8.094 0 0 1-1.402 0c-.743-.064-1.289-.614-1.458-1.26l-.289-1.106c-.018-.066-.079-.158-.212-.224a4.193 4.193 0 0 1-.667-.386c-.123-.082-.233-.09-.3-.071l-1.102.303c-.644.176-1.392-.021-1.82-.63a7.987 7.987 0 0 1-.704-1.218c-.315-.675-.111-1.422.363-1.891l.815-.806c.05-.048.098-.147.088-.294a6.814 6.814 0 0 1 0-.772c.01-.147-.038-.246-.088-.294l-.815-.806C.635 6.045.431 5.298.746 4.623a7.92 7.92 0 0 1 .704-1.217c.428-.61 1.176-.807 1.82-.63l1.102.302c.067.019.177.011.3-.071.214-.143.437-.272.668-.386.133-.066.194-.158.211-.224l.29-1.106C6.009.645 6.556.095 7.299.03 7.53.01 7.764 0 8 0Zm-.571 1.525c-.036.003-.108.036-.137.146l-.289 1.105c-.147.561-.549.967-.998 1.189-.173.086-.34.183-.5.29-.417.278-.97.423-1.529.27l-1.103-.303c-.109-.03-.175.016-.195.045-.22.312-.412.644-.573.99-.014.031-.021.11.059.19l.815.806c.411.406.562.957.53 1.456a4.709 4.709 0 0 0 0 .582c.032.499-.119 1.05-.53 1.456l-.815.806c-.081.08-.073.159-.059.19.162.346.353.677.573.989.02.03.085.076.195.046l1.102-.303c.56-.153 1.113-.008 1.53.27.161.107.328.204.501.29.447.222.85.629.997 1.189l.289 1.105c.029.109.101.143.137.146a6.6 6.6 0 0 0 1.142 0c.036-.003.108-.036.137-.146l.289-1.105c.147-.561.549-.967.998-1.189.173-.086.34-.183.5-.29.417-.278.97-.423 1.529-.27l1.103.303c.109.029.175-.016.195-.045.22-.313.411-.644.573-.99.014-.031.021-.11-.059-.19l-.815-.806c-.411-.406-.562-.957-.53-1.456a4.709 4.709 0 0 0 0-.582c-.032-.499.119-1.05.53-1.456l.815-.806c.081-.08.073-.159.059-.19a6.464 6.464 0 0 0-.573-.989c-.02-.03-.085-.076-.195-.046l-1.102.303c-.56.153-1.113.008-1.53-.27a4.44 4.44 0 0 0-.501-.29c-.447-.222-.85-.629-.997-1.189l-.289-1.105c-.029-.11-.101-.143-.137-.146a6.6 6.6 0 0 0-1.142 0ZM11 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0ZM9.5 8a1.5 1.5 0 1 0-3.001.001A1.5 1.5 0 0 0 9.5 8Z">
                            </path>
                        </svg>
                        Settings
                    </button>

                </div>
            </div>
        </div>
    </header>

    <!-- Sub-header for Week Info -->
    <div class="gh-subheader">
        <div class="gh-container" style="display: flex;justify-content: space-between;">
            <div class="week-number" id="weekNumber">
                <!-- Week number inserted here -->
            </div>
            <div style="display: flex; gap: 8px;">
                <button class="gh-btn" id="btnViewGoals" data-i18n="viewGoals">الأهداف</button>
                <button class="gh-btn" id="btnNotebook" data-i18n="notebook">دفتر الملاحظات</button>
                <button class="gh-btn" id="btnFocusMode" data-i18n="focusMode" style="display: none;" role="button"
                    aria-pressed="false" title="Focus on today's tasks"
                    aria-label="Toggle focus mode to highlight today's tasks">التركيز</button>
                <button class="gh-btn gh-btn-primary" id="btnQuickAddTask" data-i18n="quickAddTask">+ إضافة
                    سريعة</button>
            </div>
        </div>
    </div>

    <!-- Main Content Container -->
    <main class="gh-container main-content">

        <!-- 1️⃣ LOCKED SCREEN -->
        <div class="locked-screen" id="lockedScreen">
            <div class="blankslate">

                <img src="media/lock.svg" alt="Lock" class="blankslate-icon" width="80" height="80">

                <h3 class="blankslate-heading" data-i18n="weekLockedTitle">الأسبوع مغلق لحين التخطيط</h3>
                <p data-i18n="weekLockedDesc">لا يمكن إضافة مهام حتى يتم تحديد أهداف الأسبوع</p>
                <button class="gh-btn gh-btn-primary" id="btnPlanWeek" data-i18n="planWeek">خطط أسبوعك</button>
            </div>
        </div>

        <!-- 2️⃣ GOALS INPUT SCREEN -->
        <div class="goals-screen hidden" id="goalsScreen">
            <div class="gh-box">
                <div class="gh-box-header">
                    <h2 data-i18n="weeklyGoalsTitle">أهداف الأسبوع</h2>
                </div>
                <div class="gh-box-body">
                    <textarea id="goalsInput" class="gh-textarea" data-i18n-placeholder="goalsPlaceholder"
                        placeholder="اكتب أهدافك للأسبوع هنا...&#10;مثال:&#10;- إنهاء المشروع&#10;- مراجعة الكود&#10;- التحضير للاجتماع"
                        rows="8"></textarea>
                    <div class="form-actions" style="display: flex; gap: 8px; margin-top: 16px;">
                        <button class="gh-btn gh-btn-primary" id="btnSaveGoals" data-i18n="saveGoals">حفظ
                            الأهداف</button>
                        <button class="gh-btn" id="btnCancelGoals" data-i18n="close"
                            style="display: none;">إلغاء</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 3️⃣ SUCCESS MESSAGE -->
        <div class="flash-message hidden" id="successMessage">
            <div class="flash-content">
                <svg class="octicon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                    <path fill="currentColor"
                        d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z">
                    </path>
                </svg>
                <p data-i18n="successMessage">ابدأ في تقسيم أهداف الأسبوع على الأيام كمهام</p>
            </div>
            <button class="flash-close" id="btnCloseMessage">
                <svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
                    <path fill="currentColor"
                        d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z">
                    </path>
                </svg>
            </button>
        </div>

        <!-- 4️⃣ WEEK GRID -->
        <div class="week-grid hidden" id="weekGrid">
            <!-- Day cards generated by JS -->
        </div>

    </main>

    <!-- Footer -->
    <footer class="gh-footer-credits">
        <div class="gh-container">
            <p>Developed by <a href="https://www.linkedin.com/in/eng-aly-amer/" target="_blank"
                    rel="noopener noreferrer">Aly Amer</a></p>
        </div>
    </footer>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal">
        <div class="modal-container">
            <!-- Modal Header -->
            <div class="modal-header">
                <h2 data-i18n="settingsTitle">Settings</h2>
                <button class="modal-close" id="btnCloseSettings" aria-label="Close">
                    <svg viewBox="0 0 16 16" width="16" height="16">
                        <path fill="currentColor"
                            d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z">
                        </path>
                    </svg>
                </button>
            </div>

            <!-- Modal Body -->
            <div class="modal-body">
                <h3 data-i18n="dataManagement">Data Management</h3>
                <div class="settings-actions">
                    <!-- Export -->
                    <div class="settings-item">
                        <p data-i18n="exportDesc">Save a backup of your data</p>
                        <button class="settings-btn" id="btnExportData">
                            <svg viewBox="0 0 16 16" width="16" height="16">
                                <path fill="currentColor"
                                    d="M2.75 14A1.75 1.75 0 0 1 1 12.25v-2.5a.75.75 0 0 1 1.5 0v2.5c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25v-2.5a.75.75 0 0 1 1.5 0v2.5A1.75 1.75 0 0 1 13.25 14Z">
                                </path>
                                <path fill="currentColor"
                                    d="M7.25 7.689V2a.75.75 0 0 1 1.5 0v5.689l1.97-1.969a.749.749 0 1 1 1.06 1.06l-3.25 3.25a.749.749 0 0 1-1.06 0L4.22 6.78a.749.749 0 1 1 1.06-1.06l1.97 1.969Z">
                                </path>
                            </svg>
                            <span data-i18n="exportBtn">Export JSON</span>
                        </button>
                    </div>

                    <!-- Import -->
                    <div class="settings-item">
                        <p data-i18n="importDesc">Restore data from a previous file</p>
                        <input type="file" id="settingsImportFile" accept=".json" style="display: none;">
                        <button class="settings-btn" id="btnImportData">
                            <svg viewBox="0 0 16 16" width="16" height="16">
                                <path fill="currentColor"
                                    d="M2.75 14A1.75 1.75 0 0 1 1 12.25v-2.5a.75.75 0 0 1 1.5 0v2.5c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25v-2.5a.75.75 0 0 1 1.5 0v2.5A1.75 1.75 0 0 1 13.25 14Z">
                                </path>
                                <path fill="currentColor"
                                    d="M7.47 10.78a.75.75 0 0 0 1.06 0l3.25-3.25a.75.75 0 0 0-1.06-1.06L8.75 8.44V.75a.75.75 0 0 0-1.5 0v7.69L5.28 6.47a.75.75 0 0 0-1.06 1.06l3.25 3.25Z">
                                </path>
                            </svg>
                            <span data-i18n="importBtn">Import Data</span>
                        </button>
                    </div>

                    <!-- Auto Export -->
                    <div class="settings-item">
                        <p data-i18n="autoExportDesc">Save a backup daily to a folder of your choice</p>
                        <div id="settingsAutoExportStatus"
                            style="margin-bottom: 8px; font-weight: 600; font-size: 13px;"></div>
                        <button class="settings-btn" id="btnSettingsAutoExport">
                            <svg viewBox="0 0 16 16" width="16" height="16">
                                <path fill="currentColor"
                                    d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0ZM1.5 8a6.5 6.5 0 1 1 13 0 6.5 6.5 0 0 1-13 0Zm7-3.25v2.99l2.22 1.11a.75.75 0 1 1-.67 1.34l-2.55-1.275a.75.75 0 0 1-.41-.67V4.75a.75.75 0 0 1 1.5 0Z">
                                </path>
                            </svg>
                            <span id="settingsAutoExportBtnText" data-i18n="autoExportBtn">Enable Auto Export</span>
                        </button>
                    </div>

                    <!-- Clear Data -->
                    <div class="settings-item">
                        <button class="settings-btn" id="btnClearData"
                            style="border-color: var(--color-danger-emphasis); color: var(--color-danger-fg);">
                            <svg viewBox="0 0 16 16" width="16" height="16">
                                <path fill="currentColor"
                                    d="M11 1.75V3h2.25a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1 0-1.5H5V1.75C5 .784 5.784 0 6.75 0h2.5C10.216 0 11 .784 11 1.75ZM4.496 6.675l.66 6.6a.249.249 0 0 0 .249.225h5.19a.25.25 0 0 0 .249-.225l.66-6.6a.75.75 0 0 1 1.492.149l-.66 6.6A1.748 1.748 0 0 1 10.595 15h-5.19a1.75 1.75 0 0 1-1.741-1.575l-.66-6.6a.75.75 0 1 1 1.492-.15ZM6.5 1.75V3h3V1.75a.25.25 0 0 0-.25-.25h-2.5a.25.25 0 0 0-.25.25Z">
                                </path>
                            </svg>
                            <span data-i18n="clearData">Clear All Data</span>
                        </button>
                    </div>
                </div>

                <h3 data-i18n="reports">Reports</h3>
                <div class="settings-actions">
                    <button class="settings-btn" id="btnSettingsReports">
                        <svg viewBox="0 0 16 16" width="16" height="16">
                            <path fill="currentColor"
                                d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0 1 14.25 16H1.75A1.75 1.75 0 0 1 0 14.25ZM1.75 1.5a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25V1.75a.25.25 0 0 0-.25-.25ZM3.5 11.75a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5a.75.75 0 0 1-.75-.75Zm0-3.25a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75Zm0-3.25a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5a.75.75 0 0 1-.75-.75Z">
                            </path>
                        </svg>
                        <span data-i18n="reports">Reports</span>
                    </button>
                </div>

                <h3 data-i18n="appearance">Appearance</h3>
                <div class="settings-actions">
                    <button class="settings-btn" id="btnToggleTheme">
                        <svg viewBox="0 0 16 16" width="16" height="16">
                            <path fill="currentColor"
                                d="M8 12a4 4 0 1 1 0-8 4 4 0 0 1 0 8Zm0-1.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm5.657-8.157a.75.75 0 0 1 0 1.061l-1.061 1.06a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734l1.06-1.06a.75.75 0 0 1 1.06 0Zm-9.193 9.193a.75.75 0 0 1 0 1.06l-1.06 1.061a.75.75 0 1 1-1.061-1.06l1.06-1.061a.75.75 0 0 1 1.061 0ZM8 0a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0ZM3 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h1.5A.75.75 0 0 1 3 8Zm13 0a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1 0-1.5h1.5A.75.75 0 0 1 16 8Zm-8 5a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0v-1.5A.75.75 0 0 1 8 13Zm3.536-1.464a.75.75 0 0 1 1.06 0l1.061 1.06a.75.75 0 0 1-1.06 1.061l-1.061-1.06a.75.75 0 0 1 0-1.061ZM2.343 2.343a.75.75 0 0 1 1.061 0l1.06 1.061a.751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018l-1.06-1.06a.75.75 0 0 1 0-1.06Z">
                            </path>
                        </svg>
                        <span data-i18n="toggleTheme">Toggle Theme (Light/Dark)</span>
                    </button>

                    <button class="settings-btn" id="btnToggleLanguage">
                        <svg viewBox="0 0 16 16" width="16" height="16">
                            <path fill="currentColor"
                                d="M12.874 13.548c-.147-.29-.351-.573-.61-.848.337-.367.653-.787.94-1.258.151-.247.288-.5.412-.759L15 11l.5-1.5-3.535-.001c-.137.387-.311.761-.518 1.116-.279.479-.6.915-.956 1.303-.51-.57-.93-1.228-1.246-1.957l4-.001.5-1.5H8.75V6.75h3.181l.5-1.5H8.75V3.75h-1.5v1.5H3.568l-.5 1.5h4.182v1.5H3.25l-.5 1.5h4.5c.343.834.801 1.597 1.365 2.261-.59.626-1.284 1.15-2.072 1.549l.66 1.347c.974-.492 1.83-1.139 2.547-1.908.435.467.92.894 1.455 1.272l1.669-1.272ZM8 16a8 8 0 1 1 0-16 8 8 0 0 1 0 16Z">
                            </path>
                        </svg>
                        <span data-i18n="language">Toggle Language (AR/EN)</span>
                    </button>
                </div>


                <button class="settings-btn" id="btnUserGuide"
                    style="margin-top: 12px; width: 100%; justify-content: center;">
                    <svg viewBox="0 0 16 16" width="16" height="16">
                        <path fill="currentColor"
                            d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z">
                        </path>
                    </svg>
                    <span data-i18n="userGuide" style="margin-right: 8px;">User Guide</span>
                </button>
                <h3 data-i18n="about">About</h3>
                <div class="settings-info">
                    <p><strong>Version:</strong> 1.0.0</p>
                    <p><strong>Developed by:</strong> <a href="https://www.linkedin.com/in/eng-aly-amer/"
                            target="_blank">Aly Amer</a></p>
                </div>

            </div>
        </div>
    </div>

    <!-- Modals Container -->
    <div id="modalContainer"></div>

    <!-- JavaScript -->
    <script src="js/app.js"></script>
    <script src="js/notebook.js"></script>
    <script src="js/streak.js"></script>
</body>

</html>